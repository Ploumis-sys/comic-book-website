<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Comic Book Catalog (Cloud Synced)</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    .form, .comic { background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    input, button { display: block; margin: 10px 0; width: 100%; padding: 8px; }
    img { max-width: 100%; margin-top: 10px; }
    .comic-header { display: flex; justify-content: space-between; align-items: center; }
    button.delete { background-color: #e63946; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body><h1>Comic Book Catalog (Synced)</h1><div class="form">
  <input type="text" id="title" placeholder="Title" />
  <input type="text" id="issue" placeholder="Issue Number" />
  <input type="text" id="publisher" placeholder="Publisher" />
  <input type="file" id="image" accept="image/*" />
  <button onclick="addComic()">Add Comic</button>
</div><div id="catalog"></div><!-- Firebase SDKs --><script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-storage-compat.js"></script><script>
  // TODO: Replace with your Firebase project config
  const firebaseConfig = {
  apiKey: "AIzaSyCoaE8qrxZA_dmBbXgaEHbr_mvxsVSs7nE",
  authDomain: "comicbookcatalog.firebaseapp.com",
  projectId: "comicbookcatalog",
  storageBucket: "comicbookcatalog.firebasestorage.app",
  messagingSenderId: "849143854750",
  appId: "1:849143854750:web:5596dcd4891e55b0946d8f",
  measurementId: "G-4C6D8WRDEM"
};
  

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  async function addComic() {
    const title = document.getElementById('title').value.trim();
    const issue = document.getElementById('issue').value.trim();
    const publisher = document.getElementById('publisher').value.trim();
    const imageInput = document.getElementById('image');

    if (!title || !issue || !publisher || imageInput.files.length === 0) {
      alert("Please fill in all fields and select an image.");
      return;
    }

    const file = imageInput.files[0];
    const storageRef = storage.ref().child('comics/' + Date.now() + '_' + file.name);
    const snapshot = await storageRef.put(file);
    const imageUrl = await snapshot.ref.getDownloadURL();

    await db.collection('comics').add({ title, issue, publisher, imageUrl });
    document.getElementById('title').value = '';
    document.getElementById('issue').value = '';
    document.getElementById('publisher').value = '';
    document.getElementById('image').value = '';
  }

  async function deleteComic(id, imagePath) {
    await db.collection('comics').doc(id).delete();
    await storage.ref(imagePath).delete();
  }

  function renderComics() {
    db.collection('comics').onSnapshot(snapshot => {
      const catalog = document.getElementById('catalog');
      catalog.innerHTML = '';
      snapshot.forEach(doc => {
        const data = doc.data();
        const comicDiv = document.createElement('div');
        comicDiv.className = 'comic';
        comicDiv.innerHTML = `
          <div class="comic-header">
            <strong>${data.title} #${data.issue}</strong>
            <button class="delete" onclick="deleteComic('${doc.id}', 'comics/${data.imageUrl.split('/').pop().split('?')[0]}')">Delete</button>
          </div>
          <small>${data.publisher}</small>
          <img src="${data.imageUrl}" alt="Comic Cover">
        `;
        catalog.appendChild(comicDiv);
      });
    });
  }

  renderComics();
</script></body>
</html>
